<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SitPlanner</title>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <div class="container" id="mainContainer">
    <div class="toggle-container"><button class="toggle-btn" id="toggleBtn">Colapsar / Expandir Header</button></div>
    <header class="header" id="appHeader">
      <h1>Organizador de asientos para eventos</h1>
      <p>Import√° tu CSV, busc√° por nombre/etiqueta y arrastr√° cada invitado a su mesa. Capacidad por mesa configurable.</p>

      <section class="toolbar">
        <div class="card">
          <h3>1- Importar invitados (CSV)</h3>
          <input type="file" id="csvFile" class="hidden" accept=".csv" />
          <label class="file-label" for="csvFile">Elegir archivo CSV</label>
          <small style="display:block;color:var(--muted);margin-top:8px">Campos: <b>name</b>, group, notes, email, phone, company</small>
        </div>

        <div class="card">
          <h3>2- Agregar invitado</h3>
          <input class="input" id="newGuestName" placeholder="Nombre" />
          <input class="input" id="newGuestGroup" placeholder="Grupo (opcional)" style="margin-top:8px" />
          <button class="btn primary" id="addGuestBtn">Agregar</button>
        </div>

        <div class="card">
          <h3>3- Mesas</h3>
          <div class="row">
            <input class="input" type="number" id="tableCount" min="1" max="100" value="5" title="Cantidad a crear" />
          </div>
          <div class="row" style="margin-top:8px">
            <input class="input" type="number" id="defaultCap" min="1" max="30" value="11" title="Capacidad por mesa" />
          </div>
          <button class="btn primary" id="addTablesBtn">Crear mesas</button>
        </div>

        <div class="card">
          <h3>4- Guardar/Cargar</h3>
          <button class="btn primary" id="saveBtn" title="Descarga JSON">Guardar</button>
          <button class="btn warn" id="loadBtn">Cargar JSON</button>
          <button class="btn neutral" id="clearLocalBtn">Borrar autosave</button>
        </div>

        <div class="card">
          <h3>5- Exportar</h3>
          <button class="btn info" id="exportCsvBtn">Exportar asignaciones (CSV)</button>
          <button class="btn neutral" id="printBtn">Vista para imprimir</button>
        </div>

        <div class="card">
          <h3>6- Ayuda</h3>
          <div style="font-size:12px;color:var(--muted)">
            <div>‚Ä¢ Arrastr√° para asignar y us√° <b>‚ãÆ‚ãÆ</b> como handle para mover entre mesas.</div>
            <div>‚Ä¢ Doble click en el <em>contador</em> para editar capacidad.</div>
            <div>‚Ä¢ Doble click en el <em>t√≠tulo</em> (o ‚úèÔ∏è) para renombrar la mesa.</div>
            <div>‚Ä¢ Bot√≥n üóëÔ∏è en la mesa: elimina la mesa y devuelve sus invitados a ‚Äúsin asignar‚Äù.</div>
            <div>‚Ä¢ Ctrl/Cmd+S: Guardar JSON</div>
          </div>
        </div>
      </section>
    </header>

    <main class="layout">
      <aside class="guest-panel">
        <input class="input" id="searchInput" placeholder="Buscar invitados..." style="margin-bottom:12px" />
        <h3>Invitados</h3>
        <div class="statline"><span id="unassignedCount">0 sin asignar</span><span id="totalCount">0 total</span></div>
        <div class="pillbar" id="groupPills"></div>
        <div id="guestList"></div>
      </aside>

      <section class="tables">
        <div class="tables-head">
          <h3>Mesas</h3>
          <div class="stats">
            <span id="assignedGuests">Asignados: 0</span>
            <span id="totalTables">Mesas: 0</span>
          </div>
        </div>
        <div class="grid" id="tablesGrid"></div>
      </section>
    </main>
  </div>

  <script src="js/app.js"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6D7N4169C6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-6D7N4169C6');
  </script>
</body>
</html>
